\RequirePackage[most, many, breakable]{tcolorbox}
\RequirePackage{xcolor}

% \definecolor{lb}{RGB}{0,60,110}
\definecolor{lb}{RGB}{14, 65, 115}
\newtcbtheorem[number within=chapter]{Problem}{Problem}{enhanced,
	before skip=2mm,after skip=2mm, colback=lb!5,colframe=lb!80!black,boxrule=0.5mm,
	attach boxed title to top left={xshift=1cm,yshift*=1mm-\tcboxedtitleheight}, varwidth boxed title*=-3cm,
	boxed title style={frame code={
					\path[fill=tcbcolback]
					([yshift=-1mm,xshift=-1mm]frame.north west)
					arc[start angle=0,end angle=180,radius=1mm]
					([yshift=-1mm,xshift=1mm]frame.north east)
					arc[start angle=180,end angle=0,radius=1mm];
					\path[left color=tcbcolback!60!black,right color=tcbcolback!60!black,
						middle color=tcbcolback!80!black]
					([xshift=-2mm]frame.north west) -- ([xshift=2mm]frame.north east)
					[rounded corners=1mm]-- ([xshift=1mm,yshift=-1mm]frame.north east)
					-- (frame.south east) -- (frame.south west)
					-- ([xshift=-1mm,yshift=-1mm]frame.north west)
					[sharp corners]-- cycle;
				},interior engine=empty,
		},
	fonttitle=\bfseries,
	title={#2},#1}{def}

\newtcbtheorem[number within=section]{problem}{Subproblem}{enhanced,
	before skip=2mm,after skip=2mm, colback=lb!5,colframe=lb!80!black!50,boxrule=0.5mm,
	attach boxed title to top left={xshift=1cm,yshift*=1mm-\tcboxedtitleheight}, varwidth boxed title*=-3cm,
	boxed title style={frame code={
					\path[fill=tcbcolback]
					([yshift=-1mm,xshift=-1mm]frame.north west)
					arc[start angle=0,end angle=180,radius=1mm]
					([yshift=-1mm,xshift=1mm]frame.north east)
					arc[start angle=180,end angle=0,radius=1mm];
					\path[left color=tcbcolback!60!black,right color=tcbcolback!60!black,
						middle color=tcbcolback!80!black]
					([xshift=-2mm]frame.north west) -- ([xshift=2mm]frame.north east)
					[rounded corners=1mm]-- ([xshift=1mm,yshift=-1mm]frame.north east)
					-- (frame.south east) -- (frame.south west)
					-- ([xshift=-1mm,yshift=-1mm]frame.north west)
					[sharp corners]-- cycle;
				},interior engine=empty,
		},
	fonttitle=\bfseries,
	title={Subproblem~\thesection.\thesubsection.\tcbtheoremnumber},#1}{def}
% \newcommand{\theproblem}{\thesection.\thesubsection.\arabic{problem}}


\DeclareOption{one}{\def\import_path{..}}
\DeclareOption{two}{\def\import_path{../..}}
\DeclareOption{three}{\def\import_path{../../..}}
\DeclareOption{four}{\def\import_path{../../../..}}
\DeclareOption{five}{\def\import_path{../../../../..}}
\DeclareOption{extra-page}{
    \newcommand{\hwq}[2]{
        % \newpage\clearpage
        % \addcontentsline{toc}{section}{#1}
        \newpage%\section{#1}
		\stepcounter{section}
		\begin{Problem}[colbacktitle=lb!75!black]{#1}{}#2\end{Problem}

        % \fcolorbox{redbrown}{sepia}{\parbox{\textwidth}{\textcolor{redbrown}{#2}}}\newline
    }
}
\ifx\hwq\undefined
    \newcommand{\hwq}[2]{
        % \addcontentsline{toc}{section}{#1}
        % \section{#1}
		\stepcounter{section}
        \begin{Problem}[colbacktitle=lb!75!black]{#1}{}#2\end{Problem}
        % \fcolorbox{redbrown}{sepia}{\parbox{\textwidth}{\textcolor{redbrown}{#2}}}\newline
    }
\fi

\ProcessOptions\relax

\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage[all]{hypcap}
\usepackage{amsmath}
\usepackage{multirow}
\usepackage{float}
\usepackage{array}
\usepackage{hhline}
\usepackage{amssymb}
\usepackage{import}
\usepackage{mathtools}
\usepackage{siunitx}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{tikz}
\usepackage[titles]{tocloft}
\usepackage{fancyhdr}
\usepackage{bm}
\usepackage{wrapfig}
\usepackage{braket}
\usepackage{pgfplots}
\pgfplotsset{compat=newest}
\usepackage[
    starfontserif % comment for sans glyphs
]{starfont}
\usepackage{manfnt}
\usepackage{esint}

\subimport{\import_path}{preamble}
\subimport{\import_path}{macros}
\subimport{\import_path}{letterfonts}
\def\rcurs{{\mbox{$\includegraphics[trim={0 0 1.75in 0},clip,width=.1in,height=.08in]{\import_path/ScriptR}$}}}
\def\brcurs{{\mbox{$\includegraphics[trim={0 0 1.75in 0},clip,width=.1in,height=.08in]{\import_path/BoldR}$}}}
\def\hrcurs{{\mbox{$\hat \brcurs$}}}

%Chapter functions:
\newcommand{\bchapter}[1]{\chapter{#1}\eqchap{#1}}
\newcommand{\formula}[2]{\label{#1}\begin{align}\label{#1}\boxed{#2}\end{align}\myequations{#1}\vspace{-7.5mm}\begin{center}\small\textit{#1}\normalsize\end{center}}

\newcommand{\onlyif}{\Longleftarrow}
\newcommand{\0}{\vec{0}}
\newcommand{\SLASH}{\char`\\}
\newcommand{\B}{$\beta$}
\newcommand{\qmatrix}[1]{\begin{pmatrix}#1\end{pmatrix}}
\newcommand{\qsqum}[1]{\begin{bmatrix}#1\end{bmatrix}}
\newcommand{\linear}[3]{$#1:#2\rightarrow #3$}
\newcommand{\ith}{$\text{i}^{\text{th}}$}
\newcommand{\third}{\frac{1}{3}}
\newcommand{\qdet}[1]{\begin{vmatrix}#1\end{vmatrix}}
\newcommand{\<}[1]{\left\langle #1 \right\rangle}
\newcommand{\degree}{^\circ}
\newcommand{\dirsum}{\oplus}
\newcommand{\basis}[1]{\left\{#1\right\}}
\newcommand{\bvec}[1]{\textbf{#1}}

%Normal derivatives
\newcommand{\deriv}[2]{\frac{d#1}{d#2}}
\newcommand{\pderiv}[2]{\frac{\partial #1}{\partial #2}}

%Partial derivatives
\newcommand{\derivn}[3]{\ensuremath{\ifstrempty{#1}{\deriv{#2}{#3}}{\frac{{d}^{#1}#2}{{d#3}^{#1}}}}}
\newcommand{\pderivn}[3]{\ensuremath{\ifstrempty{#1}{\pderiv{#2}{#3}}{\frac{{\partial}^{#1}#2}{{\partial #3}^{#1}}}}}

%Quick derivatives
\newcommand{\diff}[1]{d_{#1}}
\newcommand{\pdiff}[1]{\partial_{#1}}

%Circular labels
\newcommand{\circlab}[1]{{\large\protect\textcircled{\small #1}}}

%Math stuff
\newcommand{\qvec}[1]{\ensuremath{\vec{#1}(t)}}
\newcommand{\vnorm}[1]{\ensuremath{\left|\left|\vec{#1}\right|\right|}}
\newcommand{\nnorm}[1]{\ensuremath{\left|\left|#1\right|\right|}}
\newcommand{\diverg}[1]{\ensuremath{\text{div}\vec{#1}}}
\newcommand{\curl}[1]{\ensuremath{\text{curl}\vec{#1}}}
\newcommand{\vfield}[4]{\ensuremath{\ifstrempty{#4}{\vec{#1}(#2)=\<{#3}}{\vec{#1}(#2)=#4\<{#3}}}}

\newcommand{\Real}[1]{\ensuremath{\text{Re}\left(#1\right)}}
\newcommand{\Ima}[1]{\ensuremath{\text{Im}\left(#1\right)}}
\newcommand{\Lagr}[1]{\ensuremath{\ifstrempty{#1}{\mathcal{L}}{\mathcal{L}\left[#1\right]}}}
\newcommand{\iLagr}[1]{\ensuremath{\ifstrempty{#1}{\mathcal{L}^{-1}}{\mathcal{L}^{-1}\left[#1\right]}}}
\newcommand{\eval}[2]{\Big|_{#1}^{#2}}
\newcommand{\divider}{\noindent\makebox[\linewidth]{\rule{\textwidth}{0.4pt}}}
\newcommand{\rom}[1]{\uppercase\expandafter{\romannumeral #1\relax}}
\newcommand{\com}[2]{\left[\hat{#1},\hat{#2}\right]}

%Stuff for physics assignment in physics:
\newcommand{\defcourse}[1]{\def\course{#1}}
\newcommand{\defassignnum}[1]{\def\assignnum{#1}}
\newcommand{\startassign}[1]{\setcounter{chapter}{\assignnum}\pagestyle{fancy}\fancyhead{}\fancyhead[LO]{#1}\fancyhead[RO]{\course - Assignment \assignnum}}
\definecolor{sepia}{RGB}{253, 243, 220}
\definecolor{redbrown}{RGB}{96, 62, 55}

\newcounter{subquestionnumber}[section]
\newcommand{\hwsq}[3]{
	\refstepcounter{subquestionnumber}
	\begin{problem}[colbacktitle=lb!75!black!50]{}{}\noindent\textbf{#2}\newline\sol{#3}\end{problem}


	% \subsection*{Question #1 - Part \alph{subquestionnumber})}
	% \sol{#3}\newline
    % \begin{problem}[colbacktitle=lb!75!black!50]{}{}#2\end{problem}\sol{#3}
    % \refstepcounter{subquestionnumber}\noindent\textbf{Question #1 - Part \alph{subquestionnumber})}\newline\fcolorbox{redbrown}{sepia!50}{\parbox{\textwidth}{\textcolor{redbrown}{#2}}}\newline\newline\sol{#3}\newline
}

%Astrosymbols:
\DeclareSymbolFont{starfontsym}{OT1}{sts}{m}{n}
\DeclareMathSymbol{\mathSun}{\mathord}{starfontsym}{115}
\DeclareMathSymbol{\mathMercury}{\mathord}{starfontsym}{102}
\DeclareMathSymbol{\mathVenus}{\mathord}{starfontsym}{103}
\DeclareMathSymbol{\mathTerra}{\mathord}{starfontsym}{76}
\DeclareMathSymbol{\mathvarTerra}{\mathord}{starfontsym}{108}
\DeclareMathSymbol{\mathMoon}{\mathord}{starfontsym}{100}
\DeclareMathSymbol{\mathvarMoon}{\mathord}{starfontsym}{97}
\DeclareMathSymbol{\mathMars}{\mathord}{starfontsym}{104}
\DeclareMathSymbol{\mathJupiter}{\mathord}{starfontsym}{106}
\DeclareMathSymbol{\mathSaturn}{\mathord}{starfontsym}{83}
\DeclareMathSymbol{\mathUranus}{\mathord}{starfontsym}{70}
\DeclareMathSymbol{\mathvarUranus}{\mathord}{starfontsym}{65}
\DeclareMathSymbol{\mathNeptune}{\mathord}{starfontsym}{71}
\DeclareMathSymbol{\mathPluto}{\mathord}{starfontsym}{74}
\DeclareMathSymbol{\mathvarPluto}{\mathord}{starfontsym}{72}

%Cube function:
\newcommand*\cube{\mbox{\mancube}}

%New units:
\DeclareSIUnit\parsec{\text{pc}}
\DeclareSIUnit\erg{\text{erg}}
